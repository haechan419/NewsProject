# JWT 토큰 만료 시간 가이드

## 권장 설정 값

### Access Token (액세스 토큰)
**권장 값: 15분 ~ 1시간**

| 환경 | 권장 시간 | 이유 |
|------|----------|------|
| **높은 보안이 필요한 서비스** (금융, 의료 등) | **15분** | 토큰 탈취 시 피해 범위 최소화 |
| **일반 웹 애플리케이션** | **30분 ~ 1시간** | 보안과 사용자 경험의 균형 |
| **모바일 앱** | **1시간 ~ 2시간** | 네트워크 요청 최소화 |

**현재 설정: 15분** ✅ (보안 강화된 설정)

### Refresh Token (리프레시 토큰)
**권장 값: 7일 ~ 30일**

| 환경 | 권장 시간 | 이유 |
|------|----------|------|
| **높은 보안이 필요한 서비스** | **7일** | 보안 강화, 정기적인 재인증 유도 |
| **일반 웹 애플리케이션** | **14일 ~ 30일** | 사용자 편의성과 보안의 균형 |
| **모바일 앱** | **30일 ~ 90일** | 사용자 경험 최적화 |

**현재 설정: 7일** ✅ (보안 강화된 설정)

## 보안 모범 사례

### 1. Access Token은 짧게
- **이유**: Access Token이 탈취되어도 짧은 시간 내에 만료되어 피해 최소화
- **트레이드오프**: 너무 짧으면 (5분 미만) 사용자가 자주 재인증해야 해서 불편함

### 2. Refresh Token은 길게
- **이유**: 사용자가 자주 로그인하지 않아도 되도록 편의성 제공
- **주의**: Refresh Token도 탈취될 수 있으므로 Rotation(회전) 전략 고려

### 3. 토큰 Rotation 전략 (권장)
- Refresh Token 사용 시 새로운 Refresh Token도 함께 발급
- 이전 Refresh Token 무효화 (보안 강화)

### 4. 쿠키 MaxAge와 JWT 만료 시간 일치
- 쿠키의 `MaxAge`와 JWT의 `expiration` 시간이 일치해야 함
- 불일치 시 예상치 못한 동작 발생 가능

## 현재 프로젝트 권장 설정

### 개발 환경
```properties
# Access Token: 30분 (개발 편의성)
jwt.access-token-expiration=1800000

# Refresh Token: 7일
jwt.refresh-token-expiration=604800000
```

### 프로덕션 환경 (높은 보안)
```properties
# Access Token: 15분 (현재 설정)
jwt.access-token-expiration=900000

# Refresh Token: 7일 (현재 설정)
jwt.refresh-token-expiration=604800000
```

### 프로덕션 환경 (일반 서비스)
```properties
# Access Token: 1시간
jwt.access-token-expiration=3600000

# Refresh Token: 14일
jwt.refresh-token-expiration=1209600000
```

## 시간 변환 참고

| 시간 | 밀리초 (ms) | 초 |
|------|------------|-----|
| 15분 | 900,000 | 900 |
| 30분 | 1,800,000 | 1,800 |
| 1시간 | 3,600,000 | 3,600 |
| 1일 | 86,400,000 | 86,400 |
| 7일 | 604,800,000 | 604,800 |
| 14일 | 1,209,600,000 | 1,209,600 |
| 30일 | 2,592,000,000 | 2,592,000 |

## 주의사항

1. **쿠키 MaxAge와 JWT 만료 시간 일치**: 현재 Refresh Token 쿠키가 1일로 설정되어 있지만 JWT는 7일입니다. 일치시켜야 합니다.

2. **환경별 설정**: 개발/프로덕션 환경에 따라 다른 값을 사용하는 것을 권장합니다.

3. **사용자 경험 고려**: 너무 짧은 Access Token은 사용자 경험을 해칠 수 있습니다.

4. **보안 모니터링**: 토큰 탈취 시도를 감지하고 차단하는 로직 추가 권장 (Rate Limiting 등)
