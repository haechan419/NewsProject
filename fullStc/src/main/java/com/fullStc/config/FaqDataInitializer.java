package com.fullStc.config;

import com.fullStc.support.domain.Faq;
import com.fullStc.support.domain.FaqCategory;
import com.fullStc.support.repository.FaqRepository;
import jakarta.persistence.EntityManager;
import jakarta.persistence.Query;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.boot.ApplicationArguments;
import org.springframework.boot.ApplicationRunner;
import org.springframework.core.annotation.Order;
import org.springframework.stereotype.Component;
import org.springframework.transaction.annotation.Transactional;

/**
 * FAQ 초기 데이터 생성
 * 애플리케이션 시작 시 FAQ 샘플 데이터를 자동으로 생성합니다.
 */
@Component
@Order(2) // DataInitializer 이후에 실행
@Slf4j
@RequiredArgsConstructor
@org.springframework.boot.autoconfigure.condition.ConditionalOnProperty(
    name = "app.init.dummy-data",
    havingValue = "true",
    matchIfMissing = true
)
public class FaqDataInitializer implements ApplicationRunner {

    private final FaqRepository faqRepository;
    private final EntityManager entityManager;

    @Override
    @Transactional
    public void run(ApplicationArguments args) throws Exception {
        log.info("=== FAQ 초기 데이터 생성 시작 ===");

        // 기존 FAQ 데이터 삭제 후 재생성 (외래키 제약조건 고려)
        long existingCount = faqRepository.count();
        if (existingCount > 0) {
            log.info("기존 FAQ 데이터 {}건을 삭제하고 재생성합니다.", existingCount);
            
            // 외래키 제약조건 해결: qa_history의 faq_id를 먼저 NULL로 설정
            Query updateQuery = entityManager.createNativeQuery(
                "UPDATE qa_history SET faq_id = NULL WHERE faq_id IS NOT NULL"
            );
            int updatedCount = updateQuery.executeUpdate();
            log.info("qa_history의 faq_id 참조 {}건을 NULL로 설정했습니다.", updatedCount);
            
            // FAQ 삭제 (외래키 참조가 제거되었으므로 안전하게 삭제 가능)
            faqRepository.deleteAll();
            faqRepository.flush(); // 즉시 반영
            log.info("기존 FAQ 데이터 삭제 완료");
        }

        // =========================================
        // 드라이브 모드 (DRIVE) 카테고리 - 15개
        // =========================================
        createFaq(FaqCategory.DRIVE, 
            "플레이리스트 고르면 왜 이렇게 오래 걸려요?",
            "선택하신 주제에 맞는 뉴스를 모아 음성으로 만드는 시간이 필요합니다. 보통 몇 초에서 10초 정도 걸리며, 네트워크 상황에 따라 다소 달라질 수 있습니다.",
            "플레이리스트, 오래, 시간, 로딩, 느림");

        createFaq(FaqCategory.DRIVE, 
            "\"플레이리스트를 준비하고 있습니다\"에서 계속 멈춰 있어요.",
            "최대 1분 정도까지는 기다려 보시고, 그래도 진행이 없으면 화면을 닫았다가 같은 플레이리스트를 다시 선택해 보세요. 자주 그렇다면 Wi-Fi·데이터 연결과 앱 최신 버전을 확인해 보시는 것이 좋습니다.",
            "플레이리스트, 준비, 멈춤, 로딩, 대기");

        createFaq(FaqCategory.DRIVE, 
            "재생하다가 중간에 끊겨요.",
            "네트워크가 잠깐 불안정하거나 앱이 백그라운드로 갈 때 끊길 수 있습니다. 같은 플레이리스트를 다시 선택하거나, 히스토리에서 해당 플레이리스트를 골라 다시 재생해 보시고, 자주 반복되면 연결 상태와 앱 버전을 확인해 주세요.",
            "재생, 끊김, 중단, 멈춤, 네트워크");

        createFaq(FaqCategory.DRIVE, 
            "말했는데 \"음성을 인식하지 못했습니다\"만 나와요.",
            "조용한 곳에서 마이크에 가깝게, 짧게 말해 보세요. 차량·블루투스 소음이 크면 화면 버튼으로 조작해 보시는 것이 좋습니다.",
            "음성, 인식, 실패, 마이크, 말");

        createFaq(FaqCategory.DRIVE, 
            "\"명령을 이해하지 못했습니다\"라고만 해요.",
            "\"일시정지\", \"재생\", \"다음 기사\", \"10초 앞으로\", \"도움말\"처럼 짧은 표현을 사용해 보세요. 문장이 길거나 다른 표현이면 인식이 어려울 수 있습니다.",
            "명령, 이해, 음성, 인식, 표현");

        createFaq(FaqCategory.DRIVE, 
            "아까 듣다 만 거 이어서 들을 수 있나요?",
            "이전에 들으시던 플레이리스트는 히스토리에 남아 있습니다. 드라이브 모드에서 히스토리 탭을 열어 해당 플레이리스트를 선택하시면, 처음부터 다시 들으실 수 있습니다.",
            "이어듣기, 히스토리, 계속, 재생, 듣던");

        createFaq(FaqCategory.DRIVE, 
            "예전에 들었던 뉴스 다시 들을 수 있나요?",
            "네. 히스토리에서 들었던 플레이리스트를 선택하시면, 해당 플레이리스트를 처음부터 다시 재생할 수 있습니다.",
            "히스토리, 다시, 재생, 이전, 뉴스");

        createFaq(FaqCategory.DRIVE, 
            "\"음성 생성 중 오류가 발생했습니다\" 뜨는데요.",
            "잠시 뒤 같은 플레이리스트를 다시 선택해 보시고, 계속되면 앱을 완전히 종료했다가 다시 켜 보세요. 같은 현상이 반복되면 고객센터로 문의해 주시면 됩니다.",
            "음성, 생성, 오류, 에러, TTS");

        createFaq(FaqCategory.DRIVE, 
            "\"연결 문제가 있습니다. 잠시 후 다시 시도해 주세요\" 나와요.",
            "네트워크가 불안정한 상태입니다. Wi-Fi나 데이터 연결을 확인하신 뒤, 통신이 안정된 곳에서 다시 시도해 보세요.",
            "연결, 네트워크, 오류, 인터넷, 와이파이");

        createFaq(FaqCategory.DRIVE, 
            "드라이브 모드는 어떻게 사용하나요?",
            "드라이브 모드는 운전 중에도 안전하게 뉴스를 들을 수 있는 기능입니다. 메인 페이지에서 드라이브 모드를 선택하시면 플레이리스트를 선택할 수 있으며, 음성 명령으로 조작할 수 있습니다.",
            "드라이브, 모드, 사용법, 운전, 뉴스");

        createFaq(FaqCategory.DRIVE, 
            "플레이리스트는 어떤 주제가 있나요?",
            "정치, 경제, 사회, IT/과학, 스포츠, 국제 등 다양한 카테고리별 플레이리스트를 제공합니다. 관심 카테고리를 설정하시면 해당 주제의 플레이리스트가 우선 표시됩니다.",
            "플레이리스트, 주제, 카테고리, 뉴스");

        createFaq(FaqCategory.DRIVE, 
            "음성 명령은 어떤 것들이 있나요?",
            "\"일시정지\", \"재생\", \"다음 기사\", \"이전 기사\", \"10초 앞으로\", \"10초 뒤로\", \"도움말\" 등의 명령을 사용할 수 있습니다. 짧고 명확하게 말씀하시면 더 잘 인식됩니다.",
            "음성, 명령, 조작, 제어, 인식");

        createFaq(FaqCategory.DRIVE, 
            "백그라운드에서도 재생되나요?",
            "네, 드라이브 모드는 백그라운드에서도 계속 재생됩니다. 다만 일부 기기나 브라우저에서는 백그라운드 재생이 제한될 수 있습니다.",
            "백그라운드, 재생, 화면, 꺼짐");

        createFaq(FaqCategory.DRIVE, 
            "플레이리스트 길이는 얼마나 되나요?",
            "플레이리스트는 선택하신 주제의 최신 뉴스들을 모아 약 10-15분 분량으로 구성됩니다. 재생 중에도 언제든지 다음 기사로 넘어가거나 일시정지할 수 있습니다.",
            "플레이리스트, 길이, 시간, 분량, 뉴스");

        createFaq(FaqCategory.DRIVE, 
            "음성 품질이 좋지 않아요.",
            "네트워크 상태가 불안정하거나 서버 부하가 있을 때 음성 품질이 떨어질 수 있습니다. 잠시 후 다시 시도하시거나, Wi-Fi 연결이 안정적인 환경에서 사용해 보세요.",
            "음성, 품질, TTS, 음질, 품질");

        // =========================================
        // 영상제작 (VIDEO) 카테고리 - 15개
        // =========================================
        createFaq(FaqCategory.VIDEO, 
            "영상을 제작하려면 어떻게 해야 하나요?",
            "메인 페이지에서 '영상 제작' 메뉴를 선택하시면 영상 제작 페이지로 이동할 수 있습니다. 제목과 내용을 입력하고 원하는 영상 스타일을 선택한 후 '제작하기' 버튼을 클릭하시면 AI가 자동으로 영상을 생성해드립니다.",
            "영상, 제작, 만들기, 생성");

        createFaq(FaqCategory.VIDEO, 
            "영상 제작에 시간이 얼마나 걸리나요?",
            "영상 제작 시간은 영상 길이와 복잡도에 따라 다르지만, 일반적으로 1-3분 길이의 영상은 약 5-10분 정도 소요됩니다. 제작이 완료되면 알림을 통해 확인하실 수 있습니다.",
            "영상, 시간, 소요, 완료");

        createFaq(FaqCategory.VIDEO, 
            "제작한 영상을 수정하거나 삭제할 수 있나요?",
            "제작한 영상은 수정할 수 없으며, 삭제만 가능합니다. 영상 상세 페이지에서 삭제 버튼을 클릭하시면 영상이 삭제됩니다. 삭제된 영상은 복구할 수 없으니 신중하게 결정해주세요.",
            "영상, 수정, 삭제, 편집");

        createFaq(FaqCategory.VIDEO, 
            "영상 제작 시 어떤 파일 형식을 지원하나요?",
            "현재 MP4, MOV, AVI 형식을 지원하며, 최대 파일 크기는 500MB까지 업로드 가능합니다. 고화질 영상의 경우 제작 시간이 더 오래 걸릴 수 있습니다.",
            "영상, 파일, 형식, MP4, MOV, AVI");

        createFaq(FaqCategory.VIDEO, 
            "영상 제작 중 오류가 발생했어요.",
            "영상 제작 중 오류가 발생하면 제작이 중단됩니다. 같은 내용으로 다시 제작을 시도해 보시고, 계속 오류가 발생하면 고객센터로 문의해 주세요. 오류 메시지를 함께 알려주시면 더 빠르게 해결할 수 있습니다.",
            "영상, 제작, 오류, 에러, 실패");

        createFaq(FaqCategory.VIDEO, 
            "영상 다운로드는 어떻게 하나요?",
            "제작이 완료된 영상의 상세 페이지에서 다운로드 버튼을 클릭하시면 영상을 다운로드할 수 있습니다. 다운로드한 영상은 기기의 다운로드 폴더에 저장됩니다.",
            "영상, 다운로드, 저장, 파일");

        createFaq(FaqCategory.VIDEO, 
            "영상 제작 비용이 있나요?",
            "현재 영상 제작 기능은 무료로 제공됩니다. 향후 유료 기능이 추가될 경우 사전에 공지해드리겠습니다.",
            "영상, 비용, 요금, 무료, 유료");

        createFaq(FaqCategory.VIDEO, 
            "영상에 자막을 추가할 수 있나요?",
            "현재는 자동 자막 생성 기능을 지원하지 않습니다. 향후 업데이트를 통해 자막 기능이 추가될 예정입니다.",
            "영상, 자막, 텍스트, 자동");

        createFaq(FaqCategory.VIDEO, 
            "영상 해상도는 어떻게 설정하나요?",
            "영상 제작 시 기본 해상도는 1080p로 설정됩니다. 고해상도 옵션은 현재 준비 중이며, 향후 업데이트를 통해 제공될 예정입니다.",
            "영상, 해상도, 화질, 1080p, 4K");

        createFaq(FaqCategory.VIDEO, 
            "영상 제작 한도가 있나요?",
            "현재는 일일 제작 한도가 없습니다. 다만 서버 부하를 고려하여 동시에 여러 영상을 제작하는 것은 권장하지 않습니다.",
            "영상, 제작, 한도, 제한, 개수");

        createFaq(FaqCategory.VIDEO, 
            "영상에 배경음악을 추가할 수 있나요?",
            "현재는 배경음악 추가 기능을 지원하지 않습니다. 향후 업데이트를 통해 배경음악 라이브러리가 제공될 예정입니다.",
            "영상, 배경음악, BGM, 음악, 사운드");

        createFaq(FaqCategory.VIDEO, 
            "영상 제작 실패 시 환불이 되나요?",
            "영상 제작은 무료 서비스이므로 환불 대상이 아닙니다. 제작 실패 시 같은 내용으로 다시 제작을 시도해 보시거나 고객센터로 문의해 주세요.",
            "영상, 환불, 실패, 보상");

        createFaq(FaqCategory.VIDEO, 
            "영상을 다른 사람과 공유할 수 있나요?",
            "네, 제작한 영상의 공유 링크를 생성하여 다른 사람과 공유할 수 있습니다. 영상 상세 페이지에서 공유 버튼을 클릭하시면 링크를 복사할 수 있습니다.",
            "영상, 공유, 링크, 공유하기");

        createFaq(FaqCategory.VIDEO, 
            "영상 제작 시 템플릿을 선택할 수 있나요?",
            "현재는 기본 템플릿만 제공되며, 향후 다양한 템플릿이 추가될 예정입니다. 템플릿 선택 기능은 영상 제작 페이지에서 확인하실 수 있습니다.",
            "영상, 템플릿, 스타일, 디자인");

        createFaq(FaqCategory.VIDEO, 
            "영상 제작 중 취소할 수 있나요?",
            "영상 제작이 시작되면 취소할 수 없습니다. 제작이 완료되기 전까지는 대기 상태로 유지되며, 완료되면 알림을 받으실 수 있습니다.",
            "영상, 제작, 취소, 중단");

        // =========================================
        // 게시물작성 (POST) 카테고리 - 20개
        // =========================================
        createFaq(FaqCategory.POST, 
            "게시물을 작성하려면 어떻게 해야 하나요?",
            "상단 메뉴에서 '게시판'을 선택하시거나 메인 페이지의 '게시글 작성' 버튼을 클릭하시면 됩니다. 일반 게시판과 토론 게시판 중 선택할 수 있으며, 제목과 내용을 입력한 후 파일을 첨부할 수 있습니다.",
            "게시물, 작성, 글쓰기, 게시판");

        createFaq(FaqCategory.POST, 
            "게시물에 이미지나 파일을 첨부할 수 있나요?",
            "네, 가능합니다. 게시물 작성 시 파일 첨부 기능을 통해 이미지, 문서 등 다양한 파일을 첨부하실 수 있습니다. 최대 5개까지 첨부 가능하며, 각 파일은 최대 10MB까지 업로드 가능합니다.",
            "게시물, 이미지, 파일, 첨부, 업로드");

        createFaq(FaqCategory.POST, 
            "작성한 게시물을 수정하거나 삭제할 수 있나요?",
            "본인이 작성한 게시물은 게시물 상세 페이지에서 '수정' 및 '삭제' 버튼을 통해 수정하거나 삭제할 수 있습니다. 다만 댓글이 달린 게시물의 경우 삭제 시 주의가 필요합니다.",
            "게시물, 수정, 삭제, 편집");

        createFaq(FaqCategory.POST, 
            "일반 게시판과 토론 게시판의 차이는 무엇인가요?",
            "일반 게시판은 자유롭게 의견을 나눌 수 있는 공간이며, 토론 게시판은 특정 주제에 대해 찬반 의견을 나누는 공간입니다. 토론 게시판 작성 시에는 토론 주제를 반드시 입력해야 합니다.",
            "게시판, 일반, 토론, 차이, 찬반");

        createFaq(FaqCategory.POST, 
            "댓글을 달았는데 보이지 않아요.",
            "네트워크 문제로 댓글 등록이 실패했을 수 있습니다. 새로고침 후 댓글이 보이지 않으면 다시 작성해주세요. 부적절한 내용의 댓글은 자동으로 필터링될 수 있습니다.",
            "댓글, 안보임, 등록, 작성");

        createFaq(FaqCategory.POST, 
            "좋아요 버튼이 눌리지 않아요.",
            "로그인 상태에서만 좋아요를 누를 수 있습니다. 로그인 여부를 확인해주세요. 같은 게시글에 이미 좋아요를 누르셨다면 다시 누르면 좋아요가 취소됩니다.",
            "좋아요, 버튼, 클릭, 반응");

        createFaq(FaqCategory.POST, 
            "토론 게시판에서 투표가 안 돼요.",
            "토론 게시글의 투표는 한 번만 참여할 수 있습니다. 이미 투표하셨다면 변경이 불가능합니다. 로그인 상태를 확인해주세요.",
            "토론, 투표, 참여, 선택");

        createFaq(FaqCategory.POST, 
            "게시물에 동영상을 올릴 수 있나요?",
            "현재는 이미지와 문서 파일만 첨부 가능합니다. 동영상 업로드 기능은 향후 업데이트를 통해 제공될 예정입니다.",
            "게시물, 동영상, 영상, 비디오, 업로드");

        createFaq(FaqCategory.POST, 
            "게시물 검색은 어떻게 하나요?",
            "게시판 페이지 상단의 검색창에 키워드를 입력하시면 제목과 내용에서 검색됩니다. 검색 결과는 최신순으로 정렬되어 표시됩니다.",
            "게시물, 검색, 찾기, 키워드");

        createFaq(FaqCategory.POST, 
            "대댓글을 달 수 있나요?",
            "네, 댓글에 대댓글을 달 수 있습니다. 댓글 옆의 '답글' 버튼을 클릭하시면 대댓글을 작성할 수 있습니다.",
            "댓글, 대댓글, 답글, 답변");

        createFaq(FaqCategory.POST, 
            "게시물에 링크를 첨부할 수 있나요?",
            "게시물 내용에 직접 URL을 입력하시면 자동으로 링크로 변환됩니다. 클릭하면 해당 페이지로 이동할 수 있습니다.",
            "게시물, 링크, URL, 첨부");

        createFaq(FaqCategory.POST, 
            "게시물이 삭제되었는데 복구할 수 있나요?",
            "삭제된 게시물은 복구할 수 없습니다. 삭제하기 전에 신중하게 결정해주세요. 댓글이 달린 게시물의 경우 삭제 전에 댓글 작성자에게 알림이 전송됩니다.",
            "게시물, 삭제, 복구, 복원");

        createFaq(FaqCategory.POST, 
            "게시물 작성 시 글자 수 제한이 있나요?",
            "제목은 최대 255자, 내용은 최대 10,000자까지 작성할 수 있습니다. 내용이 길 경우 여러 개의 게시물로 나누어 작성하는 것을 권장합니다.",
            "게시물, 글자수, 제한, 길이");

        createFaq(FaqCategory.POST, 
            "게시물에 해시태그를 추가할 수 있나요?",
            "현재는 해시태그 기능을 지원하지 않습니다. 향후 업데이트를 통해 해시태그 기능이 추가될 예정입니다.",
            "게시물, 해시태그, 태그, #");

        createFaq(FaqCategory.POST, 
            "게시물을 비공개로 작성할 수 있나요?",
            "현재는 모든 게시물이 공개됩니다. 비공개 게시물 기능은 향후 업데이트를 통해 제공될 예정입니다.",
            "게시물, 비공개, 공개, 설정");

        createFaq(FaqCategory.POST, 
            "게시물에 첨부한 이미지가 안 보여요.",
            "이미지 파일 형식이 지원되지 않거나 파일이 손상되었을 수 있습니다. JPG, PNG, GIF 형식의 이미지를 사용해 주세요. 파일 크기가 10MB를 초과하면 업로드되지 않습니다.",
            "게시물, 이미지, 안보임, 첨부, 파일");

        createFaq(FaqCategory.POST, 
            "게시물 작성 중 저장할 수 있나요?",
            "현재는 임시 저장 기능을 지원하지 않습니다. 작성 중인 내용은 브라우저의 자동 저장 기능을 활용하시거나, 별도로 복사해 두시는 것을 권장합니다.",
            "게시물, 임시저장, 저장, 초안");

        createFaq(FaqCategory.POST, 
            "게시물에 인용 기능이 있나요?",
            "현재는 인용 기능을 지원하지 않습니다. 다른 게시물을 참고하고 싶으시면 링크를 첨부하시거나 내용을 직접 인용해 주세요.",
            "게시물, 인용, 참고, 링크");

        createFaq(FaqCategory.POST, 
            "게시물 작성 시 이모지를 사용할 수 있나요?",
            "네, 게시물 제목과 내용에 이모지를 사용할 수 있습니다. 키보드의 이모지 입력 기능을 사용하시면 됩니다.",
            "게시물, 이모지, 이모티콘, 표정");

        createFaq(FaqCategory.POST, 
            "게시물에 첨부한 파일을 다운로드할 수 있나요?",
            "네, 게시물에 첨부된 파일은 게시물 상세 페이지에서 다운로드할 수 있습니다. 파일명을 클릭하시면 다운로드가 시작됩니다.",
            "게시물, 파일, 다운로드, 첨부");

        // =========================================
        // 프로필/계정 (ACCOUNT) 카테고리 - 15개
        // =========================================
        createFaq(FaqCategory.ACCOUNT, 
            "내 프로필 정보를 변경하고 싶어요.",
            "상단 메뉴에서 '프로필' 또는 '내 정보' 메뉴를 클릭하시면 프로필 수정 페이지로 이동합니다. 이름, 이메일, 프로필 사진 등 원하는 정보를 수정하실 수 있습니다. 변경사항은 저장 버튼을 클릭하시면 즉시 반영됩니다.",
            "프로필, 정보, 변경, 수정");

        createFaq(FaqCategory.ACCOUNT, 
            "비밀번호를 변경하고 싶어요.",
            "프로필 설정 페이지에서 '비밀번호 변경' 메뉴를 선택하시면 비밀번호 변경 페이지로 이동합니다. 현재 비밀번호를 입력한 후 새로운 비밀번호를 입력하시면 됩니다. 보안을 위해 비밀번호는 정기적으로 변경하시는 것을 권장합니다.",
            "비밀번호, 변경, 보안");

        createFaq(FaqCategory.ACCOUNT, 
            "내가 작성한 게시물과 댓글을 확인하고 싶어요.",
            "프로필 페이지의 '내 활동' 또는 '작성한 글' 메뉴에서 작성한 게시물과 댓글을 모두 확인하실 수 있습니다. 날짜별, 카테고리별로 필터링하여 검색할 수도 있습니다.",
            "게시물, 댓글, 확인, 내활동");

        createFaq(FaqCategory.ACCOUNT, 
            "로그아웃은 어떻게 하나요?",
            "상단 메뉴 오른쪽의 프로필 아이콘을 클릭하시면 드롭다운 메뉴가 나타납니다. '로그아웃' 버튼을 클릭하시면 로그아웃됩니다. 보안을 위해 공용 컴퓨터 사용 시 반드시 로그아웃하시기 바랍니다.",
            "로그아웃, 로그인, 보안");

        createFaq(FaqCategory.ACCOUNT, 
            "얼굴인식 로그인이 실패해요.",
            "프로필 수정에서 얼굴 사진을 재등록해주세요. 밝은 조명에서 얼굴 정면을 촬영하시고, 모자나 마스크는 벗은 상태에서 등록해주세요. 등록된 사진과 현재 모습이 많이 다르면 인식이 어려울 수 있습니다.",
            "얼굴, 로그인, 인식, 실패, face");

        createFaq(FaqCategory.ACCOUNT, 
            "얼굴 정보는 어디에 저장되나요?",
            "얼굴 정보는 암호화되어 안전하게 저장됩니다. 회원 탈퇴 시 얼굴 정보도 함께 삭제되어 개인정보가 보호됩니다.",
            "얼굴, 저장, 정보, 개인정보, 암호화");

        createFaq(FaqCategory.ACCOUNT, 
            "소셜 로그인(카카오/네이버/구글) 후 계정이 생성되지 않아요.",
            "네트워크 오류로 인해 일시적으로 사용자 정보 조회에 실패했을 수 있습니다. 잠시 후 다시 로그인을 시도해주세요. 문제가 계속되면 1:1 문의를 남겨주시면 빠른 시일 내에 도움드리겠습니다.",
            "소셜, 카카오, 네이버, 구글, 로그인, 계정, 생성");

        createFaq(FaqCategory.ACCOUNT, 
            "외부 로그인(카카오, 네이버, 구글) 시 어떤 정보가 저장되나요?",
            "소셜 로그인 시 사용자의 닉네임과 이메일 정보만 저장됩니다. 비밀번호는 저장되지 않으며, 소셜 플랫폼의 보안 정책에 따라 안전하게 처리됩니다.",
            "외부, 소셜, 정보, 저장, 개인정보");

        createFaq(FaqCategory.ACCOUNT, 
            "회원 탈퇴 시 데이터가 삭제되나요?",
            "네, 회원 탈퇴 시 가입하신 사용자의 모든 정보가 삭제됩니다. 얼굴 정보, 작성한 게시글, 댓글 등 모든 데이터가 함께 삭제되며 복구가 불가능합니다.",
            "탈퇴, 삭제, 데이터, 계정, 회원");

        createFaq(FaqCategory.ACCOUNT, 
            "비밀번호를 잊어버렸어요.",
            "로그인 화면에서 '비밀번호 찾기'를 클릭하신 후, 가입 시 사용한 이메일을 입력해주세요. 비밀번호 재설정 링크가 이메일로 발송됩니다. 이메일이 오지 않으면 스팸함을 확인해주세요.",
            "비밀번호, 찾기, 재설정, 이메일");

        createFaq(FaqCategory.ACCOUNT, 
            "닉네임을 변경하고 싶어요.",
            "프로필 수정 페이지에서 닉네임을 변경할 수 있습니다. 단, 이미 다른 사용자가 사용 중인 닉네임은 사용할 수 없습니다.",
            "닉네임, 변경, 수정, 프로필");

        createFaq(FaqCategory.ACCOUNT, 
            "프로필 이미지를 변경하고 싶어요.",
            "프로필 수정 페이지에서 새로운 이미지를 업로드하여 변경할 수 있습니다. 이미지는 JPG, PNG 형식을 지원하며, 너무 큰 파일은 업로드가 제한될 수 있습니다.",
            "프로필, 이미지, 사진, 변경, 업로드");

        createFaq(FaqCategory.ACCOUNT, 
            "로그인 상태가 자꾸 풀려요.",
            "보안을 위해 일정 시간이 지나면 자동으로 로그아웃됩니다. 자주 사용하시는 기기라면 '로그인 유지' 옵션을 선택해주세요. 브라우저 쿠키가 차단되어 있으면 로그인 유지가 되지 않을 수 있습니다.",
            "로그인, 로그아웃, 유지, 풀림, 세션");

        createFaq(FaqCategory.ACCOUNT, 
            "이메일을 변경하고 싶어요.",
            "프로필 수정 페이지에서 이메일을 변경할 수 있습니다. 변경 시 이메일 인증이 필요하며, 이미 다른 계정에서 사용 중인 이메일은 사용할 수 없습니다.",
            "이메일, 변경, 수정, 인증");

        createFaq(FaqCategory.ACCOUNT, 
            "관심 카테고리는 어떻게 설정하나요?",
            "프로필 설정 또는 관심 카테고리 메뉴에서 원하는 뉴스 카테고리를 선택할 수 있습니다. 선택한 카테고리의 뉴스가 우선적으로 표시됩니다.",
            "카테고리, 관심, 설정, 뉴스");

        // =========================================
        // 기타 (ETC) 카테고리 - 5개
        // =========================================
        createFaq(FaqCategory.ETC, 
            "고객센터 AI와 오른쪽 하단 AI 비서의 차이점이 뭔가요?",
            "고객센터 AI는 서비스 이용 관련 FAQ와 문의사항에 특화되어 있습니다. 오른쪽 하단의 AI 비서는 실시간 뉴스 검색, 일반 정보 검색 등 더 다양한 기능을 제공합니다. 서비스 이용 문의는 고객센터 AI를, 뉴스나 일반 정보가 필요하시면 AI 비서를 이용해주세요.",
            "AI, 챗봇, 비서, 차이, 기능");

        createFaq(FaqCategory.ETC, 
            "FAQ와 Q&A는 어떻게 사용하나요?",
            "고객센터 페이지에서 두 가지 방법으로 이용하실 수 있습니다:\n\n1. FAQ (자주 묻는 질문): 카테고리별 FAQ 버튼을 클릭하면 즉시 미리 정의된 답변을 확인할 수 있습니다. 빠르고 정확한 정보를 원할 때 사용하세요.\n\n2. Q&A (질의응답): 채팅창에 궁금한 내용을 자유롭게 입력하시면 GPT-4o-mini AI가 FAQ 데이터베이스를 참고하여 답변해드립니다. 원하는 질문을 직접 물어볼 수 있습니다.",
            "FAQ, QA, 사용법, 고객센터");

        createFaq(FaqCategory.ETC, 
            "챗봇으로 해결되지 않는 문제는 어떻게 하나요?",
            "챗봇으로 해결되지 않는 문제나 추가 문의가 필요한 경우 '문의 티켓 작성' 버튼을 통해 직접 문의글을 작성하실 수 있습니다. 문의 내용을 상세히 작성해주시면 관리자가 확인 후 24시간 이내에 답변드리겠습니다. 문의 티켓은 '내 문의 내역'에서 확인하실 수 있습니다.",
            "챗봇, 문의, 티켓, 해결");

        createFaq(FaqCategory.ETC, 
            "서비스 이용 중 오류가 발생했어요.",
            "오류 발생 시 다음 정보를 포함하여 문의해주시면 빠르게 해결해드릴 수 있습니다:\n- 발생한 오류 메시지\n- 오류가 발생한 페이지\n- 사용 중이던 브라우저 및 버전\n- 오류 발생 시간\n\n고객센터 문의 티켓을 통해 문의해주시면 24시간 이내에 답변드리겠습니다.",
            "오류, 에러, 버그, 문제");

        createFaq(FaqCategory.ETC, 
            "개인정보는 어떻게 보호되나요?",
            "저희는 개인정보보호법을 준수하며 사용자의 개인정보를 안전하게 보호합니다. 비밀번호는 암호화되어 저장되며, 이메일 주소는 뉴스레터 발송 외에는 제3자에게 제공되지 않습니다.",
            "개인정보, 보호, 보안, 암호화");

        log.info("=== FAQ 초기 데이터 생성 완료 (총 {}건) ===", faqRepository.count());
    }

    private void createFaq(FaqCategory category, String question, String answer, String keywords) {
        Faq faq = Faq.builder()
                .category(category)
                .question(question)
                .answer(answer)
                .keywords(keywords)
                .build();
        faqRepository.save(faq);
        log.debug("FAQ 생성: [{}] {}", category, question.substring(0, Math.min(30, question.length())));
    }
}
